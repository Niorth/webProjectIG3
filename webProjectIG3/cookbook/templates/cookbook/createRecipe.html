<!doctype html>
<html>

	{% load static %}

	<head>
		<link rel="stylesheet" type="text/css" href="{% static 'cookbook/css/bootstrap/bootstrap.min.css' %}" />
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="{% static 'cookbook/css/style.css' %}" />

		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="{% static 'cookbook/js/jquery-3.4.1.min.js' %}"></script>

		<script src="{% static 'cookbook/js/bootstrap/bootstrap.min.js' %}"></script>

	</head>

	<header>
		<nav class="navbar navbar-expand-lg navbar-dark" id="navbar">
		  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
		    <span class="navbar-toggler-icon"></span>
		  </button>
		  <a class="navbar-brand" href="#">
		    <img src="{% static 'cookbook/images/cookbookLogo.png' %}" width="30" height="30" class="d-inline-block align-top" alt="">
		    Cookbook
		  </a>

		  <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
			{% if user.is_authenticated %}	
		    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
		      <li class="nav-item">
		        <a class="nav-link" href="#">Accueil</a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" href="#">Mes Recettes</a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" href="#">Créer une recette</a>
		      </li>
		    </ul>

		    <form class="form-inline my-2 my-lg-0" id="searchBar">
		      <input class="form-control mr-sm-2" type="search" placeholder="Chercher" aria-label="Search">
		      <button class="btn btn-outline-success my-2 my-sm-0" type="submit"><i class="fas fa-search"></i></button>
		    </form>
		    
		    <ul class="navbar-nav ">
		      <li class="nav-item">
		        <a class="nav-link" id="account" href="{% url 'cookbook:account' %}"><i class="far fa-user navIcon"></i></a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" id="account" href="{% url 'cookbook:logout' %}"><i class="fas fa-sign-out-alt navIcon"></i></a>
		      </li>
		    </ul>
		    
		    
		    {% else %}
		    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
		      <li class="nav-item">
		        <a class="nav-link" href="#">Accueil</a>
		      </li>
		    </ul>
		    <ul class="navbar-nav">
		      <li class="nav-item">
		        <a class="nav-link" href="{% url 'cookbook:login' %}"><button type="button" class="btn btn-outline-success">Connexion</button></a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" href="{% url 'cookbook:join' %}"><button type="button" class="btn btn-outline-success">Inscription</button></a>
		      </li>
		    </ul>
		    {% endif %}
		  </div>
		</nav>

	</header>

	<body>
		<div class="row">
			<div class="col-md-2"></div>
				<div class="col-md-8" id="formArea">
					<h1 id="formTitle">Créer une recette</h1>

					{% if messages %}
					{% for message in messages %}
					<p><strong>{{ message }}</strong></p>
					{% endfor %}
					{% endif %}

					<form action="{% url 'cookbook:createRecipe' %}" method="post" id="recipeForm" class="form-group">
					{% csrf_token %}
						<div class="formField">
							<label for="name">Nom de la recette</label>
						    <input class="form-control" type="text" name="name" id="name"/>
						</div>
						<div class="formField">
							<label for="recipe_text">Déroulé</label>
							<textarea class="form-control" name="rexipe_text" id="recipe_text" rows="10"></textarea>			
						</div>
						<div class="formField">	
							<label for="nb_people">Nombre de personne</label>
							<input class="form-control" type="number" name="nb_people" id="nb_people" min=0/>			
						</div>
						
						<div class="formField row">
							<div class="col">
								<div>
									<label for="ingredient" >Ingredient</label>
									<input class="form-control formField" type="text" placeholder="Chercher..." name="ingredient" id="searchBarInput" data-ajax-target="{% url 'cookbook:getAllIngredients' %}">	
								</div>

								<label for="unit">Unité</label>
								<input class="form-control formField" type="text" placeholder="Kg" name="unit" id="unit">

								<label for="qty">Quantité</label>
								<input class="form-control formField" type="number" name="qty" id="qty" min=0>

								<button type="button" id="addIngredientButton" class="btn btn-dark">Ajouter</button>
							</div>
							<div class="col">
								<label>Ingredients</label>
								<select class="custom-select formField" id="ingredientsList" multiple rows=10>
								</select>

								<button type="button" class="btn btn-dark" id="removeIngredientButton">Retirer</button>
							</div>
						</div>
						<div class="formField row">
							<div class="col">
								<div>
									<label for="tags" >Tag</label>
									<input class="form-control formField" type="text" placeholder="Chercher..." name="tags" id="searchBarTagsInput" data-ajax-target="{% url 'cookbook:getAllTags' %}">
								</div>
								<button type="button" id="addTagButton" class="btn btn-dark">Ajouter</button>
							</div>
							<div class="col">
								<label>Tags</label>
								<select class="custom-select formField" id="tagsList" multiple rows=5>
								</select>

								<button type="button" class="btn btn-dark" id="removeTagButton">Retirer</button>
							</div>				
						</div>
						

					<button type="button" id="submitBtn" class="btn btn-dark" data-ajax-target="{% url 'cookbook:createRecipe' %}">Valider</button>
					<p id="message"></p>
					</form>
	</body>

	<footer>
	<script src="{% static 'cookbook/js/searchBar.js' %}"></script>
	<script src="{% static 'cookbook/js/ingredientList.js' %}"></script>
	<script src="{% static 'cookbook/js/tagsList.js' %}"></script>
	<script src="{% static 'cookbook/js/submitRecipe.js' %}"></script>
	</footer>
</html>